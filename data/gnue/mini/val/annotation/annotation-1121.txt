<section archive="http://www.gnuenterprise.org/irc-logs/gnue-public.log.2006-09-18" author="Peter Sullivan" contact="mailto:psu@burdonvale.co.uk" enddate="18 Sep 2006 12:00:00 -0800" startdate="18 Sep 2006 12:00:00 -0800" subject="[IRC] 18 Sep 2006" title="Passing database error messages back to the user">

<topic>Forms</topic>
<topic>Common</topic>

<p>Reinhard M&#252;ller (reinhard) asked <quote who="Reinhard M&#252;ller">what 
is the easiest way to enforce uniqueness of a database column? 
(other than creating an unique index which will result in db exceptions 
to be thrown at the user)</quote> He <quote who="Reinhard M&#252;ller">did 
a PRE-FOCUSOUT trigger in which a query a second datasource pointing 
to the same table to find out whether the value already exists - 
but that doesn't seem too elegant</quote> and did not catch duplicates 
<quote who="Reinhard M&#252;ller">if you make both entries at the same 
commit</quote>. James Thompson (jamest) said <quote who="James Thompson">my 
users get the dupe entry sql error</quote>. Reinhard replied 
<quote who="Reinhard M&#252;ller">ok, so you simply pass the SQL backend 
error to the user - same for enforcing referential integrity? (e.g. 
making sure no master is deleted as long as details exist)</quote>. 
James said he had actually gone even further in using back-end 
(database) validation - <quote who="James Thompson">something i've 
done in postgresql is setup on update triggers  on my invoice table
that block updates after the invoice has been faxed to customer. 
i'm thinking that the error message generated by that trigger is 
displayed nicely by forms - well, wx24, i've not looked at 2.6 
yet</quote>. Reinhard said that wx 2.6 was slightly different - 
<quote who="Reinhard M&#252;ller">you get the exception text - 
with clicking "details" you get the SQL statement that 
caused the error (in case of an SQL error)</quote>.</p>

<p>However, Reinhard was not that keen on passing 
<quote who="Reinhard M&#252;ller">backend error messages to the user - as 
they look too techy - and they are (what is a problem for me) in 
English generally</quote>. James wondered <quote who="James Thompson">if 
we need a per form mapping of some sort - so you can define "If you 
get this error.  Display this instead"</quote> Reinhard had 
thought about this, <quote who="Reinhard M&#252;ller">but that would mean 
to parse backend error messages - depending on what backend you use 
and probably even on the backend version - maybe also on the current 
locale the backend runs on</quote>. This 
<quote who="Reinhard M&#252;ller">would take away the possibility to 
migrate to a different backend easily</quote>.</p>

</section>

